<source>
  @type forward
  port 24224
  bind 0.0.0.0
</source>

<match nginx.access>
  @type elasticsearch
  host elasticsearch
  port 9200
  logstash_format true
  logstash_prefix nginx
  include_tag_key true
  type_name access_log
  tag_key @log_name
  flush_interval 1s
</match>

<match user.service>
  @type elasticsearch
  host elasticsearch
  port 9200
  logstash_format true
  logstash_prefix user-service
  include_tag_key true
  type_name service_log
  tag_key @log_name
  flush_interval 1s
</match>

<match post.service>
  @type elasticsearch
  host elasticsearch
  port 9200
  logstash_format true
  logstash_prefix post-service
  include_tag_key true
  type_name service_log
  tag_key @log_name
  flush_interval 1s
</match>

<match notification.service>
  @type elasticsearch
  host elasticsearch
  port 9200
  logstash_format true
  logstash_prefix notification-service
  include_tag_key true
  type_name service_log
  tag_key @log_name
  flush_interval 1s
</match>

# 捕获所有未处理的标签
<match **>
  @type elasticsearch
  host elasticsearch
  port 9200
  logstash_format true
  logstash_prefix unknown
  include_tag_key true
  type_name unknown_log
  tag_key @log_name
  flush_interval 1s
</match>